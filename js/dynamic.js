const translations = {
  es: {
      nav_home: "Home",
      nav_about: "Acerca de",
      nav_skills: "Habilidades",
      nav_career: "Carrera",
      nav_contact: "Contáctame",
      hero_greeting: "HOLA, SOY",
      hero_desc: "Programador motivado por su pasión de aprender cosas nuevas. Experto en identificar problemas y preguntarle a la IA cómo resolverlos.",
      hero_btn_contact: "Contáctate conmigo",
      about_title: "Acerca de mi",
      about_badge: "I use Debian btw",
      about_desc_1: "Empecé a programar desde temprana edad durante la pandemia de 2020, donde comencé a desarrollar scripts y TUIs en Python en mi tiempo libre.",
      about_desc_2: "Durante ese tiempo migré de Windows a distribuciones Linux basadas en Debian, iniciando en Elementary OS y Ubuntu hasta llegar a Debian simple (donde ahora uso Hyprland como WM).",
      about_desc_3: "He desarrollado una réplica de Tetris en C++, una base de datos NoSQL en Java y conexiones cliente/servidor. Actualmente trabajo como consultor de TI en la firma legal A&D Consultores Legales.",
      about_edu_label: "Educación:",
      about_edu_text: "Estudiante de Ingeniería de Sistemas, Universidad Nacional de Trujillo.",
      stat_years: "Años Programando",
      stat_projects: "Proyectos",
      stat_linux: "Linux Enjoyer",
      skills_title: "Habilidades",
      skills_desc: "Tengo experiencia en distintos lenguajes de programación y tecnologías. Además, poseo la capacidad de aprender nuevas habilidades rápida y eficazmente.",
      skill_english: "Inglés",
      career_title: "Carrera y Trabajo",
      career_desc: "He desarrollado múltiples sistemas durante los años. Aquí una selección curada de mis mejores trabajos públicos.",
      proj_1_desc: "Un portafolio web con temas dinámicos basados en la posición del scroll.",
      proj_2_desc: "Pagina web con React y Tailwind para A&D Consultores Legales",
      proj_3_desc: "Portafolio de la Arq. Valentina Pajares de Venegas hecho con Tailwind.",
      proj_4_desc: "Implementación de un motor de base de datos no relacional desde cero utilizando Java.",
      proj_5_desc: "Una recreación no tan fiel del clásico juego Tetris utilizando C++ y librerías gráficas básicas.",
      proj_6_desc: "Implementación de un notor de conexión cliente-servidor en java con posibilidad de multiples conexiones.",
      view_repo: "Ver Repositorio",
      view_site: "Ir al sitio",
      contact_title: "CONTACTAME",
      contact_subtitle: "¿Alguna duda?",
      contact_desc: "Estoy siempre abierto a discutir nuevos proyectos, ideas creativas o oportunidades para ser parte de tus proyectos.",
      form_email: "Correo Electrónico",
      form_subject: "Asunto",
      opt_general: "General",
      opt_freelance: "Freelance",
      opt_job: "Trabajo",
      form_location: "Ubicación",
      form_message: "Mensaje",
      form_btn_send: "Enviar Mensaje",
      footer_text: "Diseñado y desarrollado con ❤️ y mucha Pilsen Trujillo."
  },
  en: {
      nav_home: "Home",
      nav_about: "About",
      nav_skills: "Skills",
      nav_career: "Career",
      nav_contact: "Contact",
      hero_greeting: "HI, I AM",
      hero_desc: "Programmer motivated by a passion for learning new things. Expert at identifying problems and asking AI how to solve them.",
      hero_btn_contact: "Contact Me",
      about_title: "About Me",
      about_badge: "I use Debian btw",
      about_desc_1: "I started programming at an early age during the 2020 pandemic, developing Python scripts and TUIs in my free time.",
      about_desc_2: "During that time I migrated from Windows to Debian-based Linux distros, starting with Elementary OS and Ubuntu until reaching pure Debian (where I now use Hyprland as WM).",
      about_desc_3: "I have developed a Tetris clone in C++, a NoSQL database in Java, and client/server connections. Currently working as an IT consultant at A&D Legal Consultants.",
      about_edu_label: "Education:",
      about_edu_text: "Systems Engineering Student, National University of Trujillo.",
      stat_years: "Years Coding",
      stat_projects: "Projects",
      stat_linux: "Linux Enjoyer",
      skills_title: "Skills",
      skills_desc: "I have experience in different programming languages and technologies. Additionally, I possess the ability to learn new skills quickly and effectively.",
      skill_english: "English",
      career_title: "Career & Work",
      career_desc: "I have developed multiple systems over the years. Here is a curated selection of my best public work.",
      proj_1_desc: "A personal web portfolio with dynamic themes based on scroll position.",
      proj_2_desc: "Website with React and Tailwind for A&D Legal Consultants.",
      proj_3_desc: "Portfolio for Arch. Valentina Pajares de Venegas made with Tailwind.",
      proj_4_desc: "Implementation of a non-relational database engine from scratch using Java.",
      proj_5_desc: "A not-so-faithful recreation of the classic Tetris game using C++ and basic graphics libraries.",
      proj_6_desc: "Implementation of a client-server connection engine in Java with multiple connection capabilities.",
      view_repo: "View Repo",
      view_site: "Visit Site",
      contact_title: "CONTACT ME",
      contact_subtitle: "Any questions?",
      contact_desc: "I am always open to discussing new projects, creative ideas, or opportunities to be part of your projects.",
      form_email: "Email",
      form_subject: "Subject",
      opt_general: "General",
      opt_freelance: "Freelance",
      opt_job: "Job",
      form_location: "Location",
      form_message: "Message",
      form_btn_send: "Send Message",
      footer_text: "Designed and developed with ❤️ and lots of Pilsen Trujillo."
  },
  it: {
      nav_home: "Home",
      nav_about: "Chi sono",
      nav_skills: "Competenze",
      nav_career: "Carriera",
      nav_contact: "Contattami",
      hero_greeting: "CIAO, SONO",
      hero_desc: "Programmatore motivato dalla passione per imparare cose nuove. Esperto nell'identificare problemi e chiedere all'IA come risolverli.",
      hero_btn_contact: "Contattami",
      about_title: "Chi sono",
      about_badge: "Uso Debian, comunque",
      about_desc_1: "Ho iniziato a programmare in tenera età durante la pandemia del 2020, sviluppando script e TUI in Python nel mio tempo libero.",
      about_desc_2: "Durante quel periodo sono passato da Windows a distribuzioni Linux basate su Debian, iniziando con Elementary OS e Ubuntu fino ad arrivare a Debian puro (dove ora uso Hyprland come WM).",
      about_desc_3: "Ho sviluppato un clone di Tetris in C++, un database NoSQL in Java e connessioni client/server. Attualmente lavoro come consulente IT presso lo studio legale A&D Consultores Legales.",
      about_edu_label: "Istruzione:",
      about_edu_text: "Studente di Ingegneria dei Sistemi, Università Nazionale di Trujillo.",
      stat_years: "Anni di Programmazione",
      stat_projects: "Progetti",
      stat_linux: "Appassionato Linux",
      skills_title: "Competenze",
      skills_desc: "Ho esperienza in diversi linguaggi di programmazione e tecnologie. Inoltre, possiedo la capacità di apprendere nuove abilità in modo rapido ed efficace.",
      skill_english: "Inglese",
      career_title: "Carriera e Lavoro",
      career_desc: "Ho sviluppato molteplici sistemi nel corso degli anni. Ecco una selezione curata dei miei migliori lavori pubblici.",
      proj_1_desc: "Un portafoglio web con temi dinamici basati sulla posizione dello scroll.",
      proj_2_desc: "Sito web con React e Tailwind per A&D Consultores Legales.",
      proj_3_desc: "Portafoglio dell'Arch. Valentina Pajares de Venegas realizzato con Tailwind.",
      proj_4_desc: "Implementazione di un motore di database non relazionale da zero utilizzando Java.",
      proj_5_desc: "Una ricreazione non molto fedele del classico gioco Tetris utilizzando C++ e librerie grafiche di base.",
      proj_6_desc: "Implementazione di un motore di connessione client-server in Java con possibilità di connessioni multiple.",
      view_repo: "Vedi Repository",
      view_site: "Vai al sito",
      contact_title: "CONTATTAMI",
      contact_subtitle: "Qualche domanda?",
      contact_desc: "Sono sempre aperto a discutere nuovi progetti, idee creative o opportunità per far parte dei tuoi progetti.",
      form_email: "Email",
      form_subject: "Oggetto",
      opt_general: "Generale",
      opt_freelance: "Freelance",
      opt_job: "Lavoro",
      form_location: "Posizione",
      form_message: "Messaggio",
      form_btn_send: "Invia Messaggio",
      footer_text: "Progettato e sviluppato con ❤️ e molta Pilsen Trujillo."
  },
  pt: {
      nav_home: "Início",
      nav_about: "Sobre mim",
      nav_skills: "Habilidades",
      nav_career: "Carreira",
      nav_contact: "Contato",
      hero_greeting: "OI, EU SOU",
      hero_desc: "Programador motivado pela paixão de aprender coisas novas. Especialista em identificar problemas e perguntar à IA como resolvê-los.",
      hero_btn_contact: "Entre em contato",
      about_title: "Sobre mim",
      about_badge: "Eu uso Debian, a propósito",
      about_desc_1: "Comecei a programar cedo durante a pandemia de 2020, desenvolvendo scripts e TUIs em Python no meu tempo livre.",
      about_desc_2: "Durante esse tempo, migrei do Windows para distribuições Linux baseadas em Debian, começando com Elementary OS e Ubuntu até chegar ao Debian puro (onde agora uso Hyprland como WM).",
      about_desc_3: "Desenvolvi um clone de Tetris em C++, um banco de dados NoSQL em Java e conexões cliente/servidor. Atualmente trabalho como consultor de TI na A&D Consultores Legales.",
      about_edu_label: "Educação:",
      about_edu_text: "Estudante de Engenharia de Sistemas, Universidade Nacional de Trujillo.",
      stat_years: "Anos de Código",
      stat_projects: "Projetos",
      stat_linux: "Linux Enjoyer",
      skills_title: "Habilidades",
      skills_desc: "Tenho experiência em diferentes linguagens de programação e tecnologias. Além disso, possuo a capacidade de aprender novas habilidades de forma rápida e eficaz.",
      skill_english: "Inglês",
      career_title: "Carreira e Trabalho",
      career_desc: "Desenvolvi vários sistemas ao longo dos anos. Aqui está uma seleção dos meus melhores trabalhos públicos.",
      proj_1_desc: "Um portfólio web com temas dinâmicos baseados na posição de rolagem.",
      proj_2_desc: "Site com React e Tailwind para A&D Consultores Legales.",
      proj_3_desc: "Portfólio da Arq. Valentina Pajares de Venegas feito com Tailwind.",
      proj_4_desc: "Implementação de um motor de banco de dados não relacional do zero usando Java.",
      proj_5_desc: "Uma recriação não tão fiel do clássico jogo Tetris usando C++ e bibliotecas gráficas básicas.",
      proj_6_desc: "Implementação de um motor de conexão cliente-servidor em Java com capacidade de múltiplas conexões.",
      view_repo: "Ver Repositório",
      view_site: "Visitar Site",
      contact_title: "CONTATE-ME",
      contact_subtitle: "Alguma dúvida?",
      contact_desc: "Estou sempre aberto a discutir novos projetos, ideias criativas ou oportunidades para fazer parte dos seus projetos.",
      form_email: "Email",
      form_subject: "Assunto",
      opt_general: "Geral",
      opt_freelance: "Freelance",
      opt_job: "Emprego",
      form_location: "Localização",
      form_message: "Mensagem",
      form_btn_send: "Enviar Mensagem",
      footer_text: "Projetado e desenvolvido com ❤️ e muita Pilsen Trujillo."
  },
  fr: {
      nav_home: "Accueil",
      nav_about: "À propos",
      nav_skills: "Compétences",
      nav_career: "Carrière",
      nav_contact: "Contact",
      hero_greeting: "SALUT, JE SUIS",
      hero_desc: "Programmeur motivé par la passion d'apprendre de nouvelles choses. Expert pour identifier les problèmes et demander à l'IA comment les résoudre.",
      hero_btn_contact: "Contactez-moi",
      about_title: "À propos de moi",
      about_badge: "J'utilise Debian, au fait",
      about_desc_1: "J'ai commencé à programmer très tôt pendant la pandémie de 2020, en développant des scripts et des TUI en Python pendant mon temps libre.",
      about_desc_2: "Pendant cette période, je suis passé de Windows à des distributions Linux basées sur Debian, en commençant par Elementary OS et Ubuntu jusqu'à Debian pur (où j'utilise maintenant Hyprland comme WM).",
      about_desc_3: "J'ai développé un clone de Tetris en C++, une base de données NoSQL en Java et des connexions client/serveur. Je travaille actuellement comme consultant informatique chez A&D Consultores Legales.",
      about_edu_label: "Éducation:",
      about_edu_text: "Étudiant en génie des systèmes, Université nationale de Trujillo.",
      stat_years: "Années de Code",
      stat_projects: "Projets",
      stat_linux: "Amateur de Linux",
      skills_title: "Compétences",
      skills_desc: "J'ai de l'expérience dans différents langages de programmation et technologies. De plus, j'ai la capacité d'apprendre de nouvelles compétences rapidement et efficacement.",
      skill_english: "Anglais",
      career_title: "Carrière et Travail",
      career_desc: "J'ai développé plusieurs systèmes au fil des ans. Voici une sélection de mes meilleurs travaux publics.",
      proj_1_desc: "Un portfolio web avec des thèmes dynamiques basés sur la position de défilement.",
      proj_2_desc: "Site web avec React et Tailwind pour A&D Consultores Legales.",
      proj_3_desc: "Portfolio pour l'Arch. Valentina Pajares de Venegas fait avec Tailwind.",
      proj_4_desc: "Mise en œuvre d'un moteur de base de données non relationnelle à partir de zéro en utilisant Java.",
      proj_5_desc: "Une recréation pas très fidèle du jeu classique Tetris utilisant C++ et des bibliothèques graphiques de base.",
      proj_6_desc: "Mise en œuvre d'un moteur de connexion client-serveur en Java avec des capacités de connexion multiples.",
      view_repo: "Voir le dépôt",
      view_site: "Visiter le site",
      contact_title: "CONTACTEZ-MOI",
      contact_subtitle: "Des questions ?",
      contact_desc: "Je suis toujours ouvert à discuter de nouveaux projets, d'idées créatives ou d'opportunités de faire partie de vos projets.",
      form_email: "Email",
      form_subject: "Sujet",
      opt_general: "Général",
      opt_freelance: "Freelance",
      opt_job: "Emploi",
      form_location: "Localisation",
      form_message: "Message",
      form_btn_send: "Envoyer le message",
      footer_text: "Conçu et développé avec ❤️ et beaucoup de Pilsen Trujillo."
  },
  cn: {
      nav_home: "首页",
      nav_about: "关于我",
      nav_skills: "技能",
      nav_career: "职业",
      nav_contact: "联系我",
      hero_greeting: "你好，我是",
      hero_desc: "充满激情的程序员，热衷于学习新事物。擅长发现问题并向 AI 寻求解决方案。",
      hero_btn_contact: "联系我",
      about_title: "关于我",
      about_badge: "顺便说一句，我用 Debian",
      about_desc_1: "我在 2020 年疫情期间开始编程，利用业余时间开发 Python 脚本和 TUI。",
      about_desc_2: "那段时间我从 Windows 迁移到了基于 Debian 的 Linux 发行版，从 Elementary OS 和 Ubuntu 开始，最终使用了纯 Debian（目前使用 Hyprland 作为窗口管理器）。",
      about_desc_3: "我开发过 C++ 版的俄罗斯方块克隆、Java NoSQL 数据库和客户端/服务器连接。目前在 A&D 法律咨询公司担任 IT 顾问。",
      about_edu_label: "教育：",
      about_edu_text: "国立特鲁希略大学系统工程系学生。",
      stat_years: "编程年限",
      stat_projects: "项目",
      stat_linux: "Linux 爱好者",
      skills_title: "技能",
      skills_desc: "我在不同的编程语言和技术方面有经验。此外，我具备快速有效学习新技能的能力。",
      skill_english: "英语",
      career_title: "职业与工作",
      career_desc: "多年来我开发了多个系统。这是我最好的公开作品精选。",
      proj_1_desc: "一个基于滚动位置动态切换主题的个人作品集网站。",
      proj_2_desc: "为 A&D 法律咨询公司制作的 React 和 Tailwind 网站。",
      proj_3_desc: "使用 Tailwind 制作的建筑师 Valentina Pajares de Venegas 的作品集。",
      proj_4_desc: "使用 Java 从零开始实现的非关系型数据库引擎。",
      proj_5_desc: "使用 C++ 和基础图形库对经典游戏俄罗斯方块的非忠实重制。",
      proj_6_desc: "用 Java 实现的客户端-服务器连接引擎，支持多重连接。",
      view_repo: "查看仓库",
      view_site: "访问网站",
      contact_title: "联系我",
      contact_subtitle: "有什么疑问吗？",
      contact_desc: "我总是乐于讨论新项目、创意点子或参与您的项目的机会。",
      form_email: "电子邮件",
      form_subject: "主题",
      opt_general: "一般",
      opt_freelance: "自由职业",
      opt_job: "工作",
      form_location: "位置",
      form_message: "留言",
      form_btn_send: "发送留言",
      footer_text: "用 ❤️ 和大量的 Pilsen Trujillo 设计与开发。"
  },
  jp: {
      nav_home: "ホーム",
      nav_about: "私について",
      nav_skills: "スキル",
      nav_career: "経歴",
      nav_contact: "お問い合わせ",
      hero_greeting: "こんにちは、私は",
      hero_desc: "新しいことを学ぶ情熱に突き動かされるプログラマー。問題を発見し、AIに解決策を尋ねるエキスパート。",
      hero_btn_contact: "連絡する",
      about_title: "私について",
      about_badge: "ちなみにDebian使いです",
      about_desc_1: "2020年のパンデミック中に幼い頃からプログラミングを始め、自由時間にPythonスクリプトやTUIを開発しました。",
      about_desc_2: "その間、WindowsからDebianベースのLinuxディストリビューションに移行し、Elementary OSやUbuntuを経て、現在は純粋なDebian（WMとしてHyprlandを使用）にたどり着きました。",
      about_desc_3: "C++でのテトリスのクローン、JavaでのNoSQLデータベース、クライアント/サーバー接続を開発しました。現在はA&D Legal ConsultantsでITコンサルタントとして働いています。",
      about_edu_label: "教育:",
      about_edu_text: "トルヒーヨ国立大学 システム工学専攻",
      stat_years: "コーディング歴",
      stat_projects: "プロジェクト",
      stat_linux: "Linux愛好家",
      skills_title: "スキル",
      skills_desc: "さまざまなプログラミング言語や技術の経験があります。また、新しいスキルを迅速かつ効果的に習得する能力を持っています。",
      skill_english: "英語",
      career_title: "経歴と仕事",
      career_desc: "長年にわたり複数のシステムを開発してきました。以下は私の最高の公開作品の厳選です。",
      proj_1_desc: "スクロール位置に基づいてテーマが動的に変化する個人のWebポートフォリオ。",
      proj_2_desc: "A&D Legal ConsultantsのためのReactとTailwindを使用したウェブサイト。",
      proj_3_desc: "Tailwindで作成された建築家Valentina Pajares de Venegasのポートフォリオ。",
      proj_4_desc: "Javaを使用してゼロから実装された非リレーショナルデータベースエンジン。",
      proj_5_desc: "C++と基本的なグラフィックライブラリを使用した、古典的なテトリスゲームのあまり忠実ではない再現。",
      proj_6_desc: "複数の接続機能を備えたJavaでのクライアントサーバー接続エンジンの実装。",
      view_repo: "リポジトリを見る",
      view_site: "サイトを見る",
      contact_title: "お問い合わせ",
      contact_subtitle: "ご質問はありますか？",
      contact_desc: "新しいプロジェクト、創造的なアイデア、またはあなたのプロジェクトに参加する機会について話し合うことに常にオープンです。",
      form_email: "メール",
      form_subject: "件名",
      opt_general: "一般",
      opt_freelance: "フリーランス",
      opt_job: "仕事",
      form_location: "場所",
      form_message: "メッセージ",
      form_btn_send: "メッセージを送信",
      footer_text: "❤️とたくさんのPilsen Trujilloで設計・開発されました。"
  }
};

// --- LANGUAGE LOGIC ---
const languageToggleBtn = document.getElementById("language-toggle");
const languageMenu = document.getElementById("language-menu");

// Toggle Menu
languageToggleBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  languageMenu.classList.toggle("hidden");
});

// Close menu when clicking outside
document.addEventListener("click", (event) => {
  if (!languageMenu.contains(event.target) && !languageToggleBtn.contains(event.target)) {
      languageMenu.classList.add("hidden");
  }
});

// Change Language Function
function changeLanguage(lang) {
  const data = translations[lang];
  if (!data) return;

  // Update all elements with data-i18n attribute
  document.querySelectorAll("[data-i18n]").forEach(element => {
      const key = element.getAttribute("data-i18n");
      if (data[key]) {
          // Check if it's an input/textarea placeholder or text content
          if (element.tagName === "INPUT" || element.tagName === "TEXTAREA") {
               // Optional: Handle placeholders if needed (add logic here if placeholders were mapped)
          } else {
              element.textContent = data[key];
          }
      }
  });

  // Update HTML lang attribute
  document.documentElement.lang = lang;

  // Close menu
  languageMenu.classList.add("hidden");
}


// --- ORIGINAL DYNAMIC.JS LOGIC (Menu & Theme) ---
const menuButton = document.getElementById("menu-button");
const menuPanel = document.getElementById("menu-panel");

if (menuButton) {
  menuButton.addEventListener("click", (e) => {
      e.stopPropagation();
      menuPanel.classList.toggle("hidden");
  });
}

document.addEventListener("click", (event) => {
  if (menuPanel && !menuPanel.contains(event.target) && menuButton && !menuButton.contains(event.target)) {
      menuPanel.classList.add("hidden");
  }
});

document.addEventListener("DOMContentLoaded", () => {
  const sections = document.querySelectorAll("section");
  const root = document.documentElement;
  const toggleBtn = document.getElementById("theme-toggle");

  // State variables
  let currentTheme = "dark"; 
  let currentSection = sections[0]; 

  const options = {
      root: null,
      rootMargin: "-20% 0px -20% 0px", 
      threshold: 0.4,
  };

  const updateColors = (section) => {
      if (!section) return;

      const computedStyle = window.getComputedStyle(section);

      const getVar = (name) => {
          const val = computedStyle.getPropertyValue(`--${currentTheme}-${name}`).trim();
          return val || computedStyle.getPropertyValue(`--dark-${name}`).trim();
      };

      root.style.setProperty("--color-bg-1", getVar("bg-1"));
      root.style.setProperty("--color-bg-2", getVar("bg-2"));
      root.style.setProperty("--color-white", getVar("text"));
      root.style.setProperty("--color-text-1", getVar("text-1"));
      root.style.setProperty("--color-text-2", getVar("text-2"));
      root.style.setProperty("--color-text-3", getVar("text-3"));
      root.style.setProperty("--color-text-4", getVar("text-4"));
      root.style.setProperty("--color-text-5", getVar("text-5"));
      root.style.setProperty("--color-text-6", getVar("text-6"));
      root.style.setProperty("--color-hyperlink", getVar("hyperlink"));
  };

  const callback = (entries) => {
      entries.forEach((entry) => {
          if (entry.isIntersecting) {
              currentSection = entry.target;
              updateColors(currentSection);
          }
      });
  };

  const observer = new IntersectionObserver(callback, options);
  sections.forEach((section) => {
      observer.observe(section);
  });

  if (toggleBtn) {
      toggleBtn.addEventListener("click", () => {
          currentTheme = currentTheme === "dark" ? "light" : "dark";
          if (currentTheme === "light") {
              toggleBtn.style.backgroundColor = "#1c1d21";
              toggleBtn.style.color = "#ffffff";
          } else {
              toggleBtn.style.backgroundColor = "#ffffff";
              toggleBtn.style.color = "#000000";
          }
          updateColors(currentSection);
      });
  }
});